<x-layouts.app> <div class="min-h-screen bg-gray-50"> <!-- Header Section --> <div class="bg-gradient-to-r from-primary-400 to-teal-light-400 text-white py-8"> <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"> <h1 class="text-4xl md:text-5xl font-bold mb-2">Complete Payment</h1> <p class="text-xl text-white/90">Secure checkout powered by Stripe</p> </div> </div> <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"> <!-- Payment Form --> <div class="lg:col-span-2"> <div class="bg-white shadow-lg p-6 md:p-8"> <!-- Stripe Logo --> <div class="flex items-center justify-between mb-6 pb-4 border-b"> <h2 class="text-2xl font-bold text-gray-900">Payment Details</h2> <svg class="h-8" viewBox="0 0 60 25" fill="#635bff" xmlns="http://www.w3.org/2000/svg"> <path d="M59.64 14.28h-8.06c.19 1.93 1.6 2.55 3.2 2.55 1.64 0 2.96-.37 4.05-.95v3.32a8.33 8.33 0 0 1-4.56 1.1c-4.01 0-6.83-2.5-6.83-7.48 0-4.19 2.39-7.52 6.3-7.52 3.92 0 5.96 3.28 5.96 7.5 0 .4-.04 1.26-.06 1.48zm-5.92-5.62c-1.03 0-2.17.73-2.17 2.58h4.25c0-1.85-1.07-2.58-2.08-2.58zM40.95 20.3c-1.44 0-2.32-.6-2.9-1.04l-.02 4.63-4.12.87V5.57h3.76l.08 1.02a4.7 4.7 0 0 1 3.23-1.29c2.9 0 5.62 2.6 5.62 7.4 0 5.23-2.7 7.6-5.65 7.6zM40 8.95c-.95 0-1.54.34-1.97.81l.02 6.12c.4.44.98.78 1.95.78 1.52 0 2.54-1.65 2.54-3.87 0-2.15-1.04-3.84-2.54-3.84zM28.24 5.57h4.13v14.44h-4.13V5.57zm0-4.7L32.37 0v3.36l-4.13.88V.88zm-4.32 9.35v9.79H19.8V5.57h3.7l.12 1.22c1-1.77 3.07-1.41 3.62-1.22v3.79c-.52-.17-2.29-.43-3.32.86zm-8.55 4.72c0 2.43 2.6 1.68 3.12 1.46v3.36c-.55.3-1.54.54-2.89.54a4.15 4.15 0 0 1-4.27-4.24l.01-13.17 4.02-.86v3.54h3.14V9.1h-3.13v5.85zm-4.91.7c0 2.97-2.31 4.66-5.73 4.66a11.2 11.2 0 0 1-4.46-.93v-3.93c1.38.75 3.1 1.31 4.46 1.31.92 0 1.53-.24 1.53-1C6.26 13.77 0 14.51 0 9.95 0 7.04 2.28 5.3 5.62 5.3c1.36 0 2.72.2 4.09.75v3.88a9.23 9.23 0 0 0-4.1-1.06c-.86 0-1.44.25-1.44.9 0 1.85 6.29.97 6.29 5.88z"/> </svg> </div> <form method="POST" action="{{ route('events.payment.process', $booking->id) }}" id="payment-form"> @csrf <!-- Email --> <div class="mb-6"> <label for="email" class="block text-sm font-medium text-gray-700 mb-2"> Email </label> <input type="email" id="email" value="{{ $booking->guest_email ?? $booking->user->email ?? '' }}" readonly class="w-full px-4 py-3 border border-gray-300 bg-gray-50 text-gray-600"> </div> <!-- Card Information --> <div class="mb-6"> <label class="block text-sm font-medium text-gray-700 mb-2"> Card information </label> <!-- Card Number --> <div class="relative"> <input type="text" name="card_number" id="card_number" placeholder="1234 1234 1234 1234" maxlength="19" required class="w-full px-4 py-3 border border-gray-300 -t focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"> <div class="absolute right-3 top-3 flex gap-1"> <svg class="h-6" viewBox="0 0 32 20" fill="none"> <rect width="32" height="20" rx="2" fill="#1434CB"/> <circle cx="11.5" cy="10" r="5.5" fill="#EB001B"/> <circle cx="20.5" cy="10" r="5.5" fill="#FF5F00"/> </svg> </div> </div> <!-- Expiry and CVC --> <div class="grid grid-cols-2"> <input type="text" name="expiry" id="expiry" placeholder="MM / YY" maxlength="7" required class="px-4 py-3 border border-gray-300 border-t-0 rounded-bl-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"> <input type="text" name="cvc" id="cvc" placeholder="CVC" maxlength="4" required class="px-4 py-3 border border-gray-300 border-t-0 border-l-0 rounded-br-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"> </div> @error('card_number') <p class="mt-2 text-sm text-red-600">{{ $message }}</p> @enderror </div> <!-- Cardholder Name --> <div class="mb-6"> <label for="cardholder_name" class="block text-sm font-medium text-gray-700 mb-2"> Cardholder name </label> <input type="text" name="cardholder_name" id="cardholder_name" placeholder="Full name on card" value="{{ old('cardholder_name', ($booking->guest_first_name && $booking->guest_surname) ? $booking->guest_first_name . ' ' . $booking->guest_surname : ($booking->user ? $booking->user->name : '')) }}" required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"> @error('cardholder_name') <p class="mt-2 text-sm text-red-600">{{ $message }}</p> @enderror </div> <!-- Billing Address --> <div class="mb-6"> <label class="block text-sm font-medium text-gray-700 mb-2"> Billing address </label> <select class="w-full px-4 py-3 border border-gray-300 bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"> <option>United Kingdom</option> </select> </div> <!-- Submit Button --> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 text-lg shadow-lg hover:shadow-xl transition transform hover:-translate-y-0.5"> Pay £{{ number_format($booking->total_amount, 2) }} </button> <!-- Security Notice --> <div class="mt-6 flex items-start gap-2 text-sm text-gray-600"> <svg class="w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/> </svg> <p>Your payment information is securely processed. We do not store your card details.</p> </div> <!-- Powered by Stripe --> <div class="mt-6 pt-6 border-t flex items-center justify-center gap-2 text-sm text-gray-500"> <span>Powered by</span> <svg class="h-4" viewBox="0 0 60 25" fill="#635bff" xmlns="http://www.w3.org/2000/svg"> <path d="M59.64 14.28h-8.06c.19 1.93 1.6 2.55 3.2 2.55 1.64 0 2.96-.37 4.05-.95v3.32a8.33 8.33 0 0 1-4.56 1.1c-4.01 0-6.83-2.5-6.83-7.48 0-4.19 2.39-7.52 6.3-7.52 3.92 0 5.96 3.28 5.96 7.5 0 .4-.04 1.26-.06 1.48zm-5.92-5.62c-1.03 0-2.17.73-2.17 2.58h4.25c0-1.85-1.07-2.58-2.08-2.58zM40.95 20.3c-1.44 0-2.32-.6-2.9-1.04l-.02 4.63-4.12.87V5.57h3.76l.08 1.02a4.7 4.7 0 0 1 3.23-1.29c2.9 0 5.62 2.6 5.62 7.4 0 5.23-2.7 7.6-5.65 7.6zM40 8.95c-.95 0-1.54.34-1.97.81l.02 6.12c.4.44.98.78 1.95.78 1.52 0 2.54-1.65 2.54-3.87 0-2.15-1.04-3.84-2.54-3.84zM28.24 5.57h4.13v14.44h-4.13V5.57zm0-4.7L32.37 0v3.36l-4.13.88V.88zm-4.32 9.35v9.79H19.8V5.57h3.7l.12 1.22c1-1.77 3.07-1.41 3.62-1.22v3.79c-.52-.17-2.29-.43-3.32.86zm-8.55 4.72c0 2.43 2.6 1.68 3.12 1.46v3.36c-.55.3-1.54.54-2.89.54a4.15 4.15 0 0 1-4.27-4.24l.01-13.17 4.02-.86v3.54h3.14V9.1h-3.13v5.85zm-4.91.7c0 2.97-2.31 4.66-5.73 4.66a11.2 11.2 0 0 1-4.46-.93v-3.93c1.38.75 3.1 1.31 4.46 1.31.92 0 1.53-.24 1.53-1C6.26 13.77 0 14.51 0 9.95 0 7.04 2.28 5.3 5.62 5.3c1.36 0 2.72.2 4.09.75v3.88a9.23 9.23 0 0 0-4.1-1.06c-.86 0-1.44.25-1.44.9 0 1.85 6.29.97 6.29 5.88z"/> </svg> </div> </form> </div> </div> <!-- Order Summary --> <div class="lg:col-span-1"> <div class="bg-white shadow-lg p-6 sticky top-8"> <h3 class="text-xl font-bold text-gray-900 mb-4">Order Summary</h3> <!-- Event Details --> <div class="mb-4 pb-4 border-b"> <h4 class="font-semibold text-gray-900 mb-2">{{ $booking->event->title }}</h4> <div class="text-sm text-gray-600 space-y-1"> <p> <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/> </svg> {{ $booking->event->start_datetime->format('l, F j, Y') }} </p> <p> <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/> </svg> {{ $booking->event->start_datetime->format('g:i A') }} </p> <p> <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/> </svg> {{ $booking->event->location->name }} </p> </div> </div> <!-- Ticket Breakdown --> <div class="space-y-3 mb-4 pb-4 border-b"> @if($booking->adult_tickets > 0) <div class="flex justify-between text-sm"> <span class="text-gray-600">Adult × {{ $booking->adult_tickets }}</span> <span class="font-medium">£{{ number_format($booking->adult_tickets * $booking->event->adult_price, 2) }}</span> </div> @endif @if($booking->child_tickets > 0) <div class="flex justify-between text-sm"> <span class="text-gray-600">Child × {{ $booking->child_tickets }}</span> <span class="font-medium">£{{ number_format($booking->child_tickets * $booking->event->child_price, 2) }}</span> </div> @endif @if($booking->concession_tickets > 0) <div class="flex justify-between text-sm"> <span class="text-gray-600">Concession × {{ $booking->concession_tickets }}</span> <span class="font-medium">£{{ number_format($booking->concession_tickets * $booking->event->concession_price, 2) }}</span> </div> @endif </div> <!-- Total --> <div class="flex justify-between items-center"> <span class="text-lg font-bold text-gray-900">Total</span> <span class="text-2xl font-bold text-primary-600">£{{ number_format($booking->total_amount, 2) }}</span> </div> </div> </div> </div> </div> </div> <!-- Card Input Formatting Script --> <script> // Format card number with spaces document.getElementById('card_number').addEventListener('input', function(e) { let value = e.target.value.replace(/\s/g, ''); let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value; e.target.value = formattedValue; }); // Format expiry date document.getElementById('expiry').addEventListener('input', function(e) { let value = e.target.value.replace(/\s/g, '').replace('/', ''); if (value.length >= 2) { value = value.substring(0, 2) + ' / ' + value.substring(2, 4); } e.target.value = value; }); // Only allow numbers in CVC document.getElementById('cvc').addEventListener('input', function(e) { e.target.value = e.target.value.replace(/\D/g, ''); }); // Only allow numbers in card number document.getElementById('card_number').addEventListener('keypress', function(e) { if (!/\d/.test(e.key) && e.key !== 'Backspace' && e.key !== 'Delete') { e.preventDefault(); } }); </script> </x-layouts.app> 
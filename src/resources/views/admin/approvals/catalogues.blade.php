<x-app-layout> <div class="py-8 px-4 sm:px-6 lg:px-8"> <div class="max-w-7xl mx-auto"> <!-- Header --> <div class="mb-8"> <div class="flex items-center justify-between"> <div> <h1 class="text-3xl font-bold text-gray-900">Catalogue Approvals</h1> <p class="mt-1 text-sm text-gray-600">Review and approve catalogues awaiting approval</p> </div> <div class="flex items-center space-x-3"> <span class="px-4 py-2 bg-yellow-100 text-yellow-800 font-semibold"> {{ $catalogues->total() }} Pending </span> </div> </div> </div> <!-- Search & Filters --> <div class="mb-6 bg-white shadow-sm border border-gray-200 p-6"> <form method="GET" action="{{ route('admin.approvals.catalogues') }}" x-data="{ showFilters: {{ request()->hasAny(['category_id', 'created_by', 'min_items', 'sort_by']) ? 'true' : 'false' }} }"> <!-- Search Bar --> <div class="flex gap-3 mb-4"> <input type="text" name="search" value="{{ request('search') }}" placeholder="Search by name, description..." class="flex-1 px-4 py-2 border border-gray-300 focus:ring-2 focus:ring-[#370671] focus:border-transparent"> <button type="button" @click="showFilters = !showFilters" class="px-4 py-2 border border-gray-300 hover:bg-gray-50 transition"> <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/> </svg> Filters </button> <x-buttons.primary type="submit"> <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/> </svg> Search </x-buttons.primary> @if(request()->hasAny(['search', 'category_id', 'created_by', 'min_items'])) <a href="{{ route('admin.approvals.catalogues') }}" class="px-4 py-2 border border-gray-300 hover:bg-gray-50 transition"> Clear </a> @endif </div> <!-- Advanced Filters --> <div x-show="showFilters" x-collapse> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200"> <!-- Category Filter --> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Category</label> <select name="category_id" class="w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-[#370671] focus:border-transparent"> <option value="">All Categories</option> @foreach($categories as $category) <option value="{{ $category->id }}" {{ request('category_id') == $category->id ? 'selected' : '' }}> {{ $category->name }} </option> @endforeach </select> </div> <!-- Creator Filter --> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Created By</label> <select name="created_by" class="w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-[#370671] focus:border-transparent"> <option value="">All Creators</option> @foreach($creators as $creator) <option value="{{ $creator->id }}" {{ request('created_by') == $creator->id ? 'selected' : '' }}> {{ $creator->full_name }} </option> @endforeach </select> </div> <!-- Min Items --> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Min Items</label> <input type="number" name="min_items" value="{{ request('min_items') }}" min="0" class="w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-[#370671] focus:border-transparent"> </div> <!-- Sort By --> <div> <label class="block text-sm font-medium text-gray-700 mb-1">Sort By</label> <select name="sort_by" class="w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-[#370671] focus:border-transparent"> <option value="updated_at" {{ request('sort_by') == 'updated_at' ? 'selected' : '' }}>Submission Date</option> <option value="name" {{ request('sort_by') == 'name' ? 'selected' : '' }}>Name</option> <option value="created_at" {{ request('sort_by') == 'created_at' ? 'selected' : '' }}>Created Date</option> </select> </div> </div> </div> </form> </div> @if($catalogues->isEmpty()) <!-- Empty State --> <div class="bg-white shadow-sm border border-gray-200 p-12 text-center"> <div class="w-16 h-16 bg-green-100 flex items-center justify-center mx-auto mb-4"> <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/> </svg> </div> <h3 class="text-lg font-semibold text-gray-900 mb-2">All Caught Up!</h3> <p class="text-gray-600"> @if(request()->hasAny(['search', 'category_id', 'created_by', 'min_items'])) No catalogues match your filters. @else There are no catalogues awaiting approval at this time. @endif </p> </div> @else <!-- Catalogues List --> <div class="space-y-4"> @foreach($catalogues as $catalogue) <div class="bg-white shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow"> <div class="p-6"> <div class="flex items-start justify-between"> <div class="flex-1"> <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ $catalogue->name }}</h3> @if($catalogue->description) <p class="text-sm text-gray-600 mb-4">{{ Str::limit($catalogue->description, 150) }}</p> @endif <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"> <div class="flex items-center text-sm text-gray-600"> <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/> </svg> <div> <span class="font-medium">Category:</span> {{ $catalogue->category?->name ?? 'N/A' }} </div> </div> <div class="flex items-center text-sm text-gray-600"> <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/> </svg> <div> <span class="font-medium">Items:</span> {{ $catalogue->items->count() }} items </div> </div> <div class="flex items-center text-sm text-gray-600"> <svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/> </svg> <div> <span class="font-medium">Created by:</span> {{ $catalogue->creator?->full_name ?? 'Unknown' }} </div> </div> </div> <div class="text-xs text-gray-500"> Submitted {{ $catalogue->updated_at?->diffForHumans() }} </div> </div> <div class="ml-6"> <x-buttons.primary href="{{ route('admin.approvals.catalogue', $catalogue) }}"> Review & Approve </x-buttons.primary> </div> </div> </div> </div> @endforeach </div> <!-- Pagination --> <div class="mt-8"> {{ $catalogues->links() }} </div> @endif </div> </div>
</x-app-layout>